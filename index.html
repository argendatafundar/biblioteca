<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Biblioteca de Datasets</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root { --fg:#222; --bg:#fff; --muted:#666; --accent:#0a7; --border:#ddd; --error:#b00; }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
    header{padding:24px 16px;border-bottom:1px solid var(--border);max-width:1400px;margin:0 auto}
    header h1{margin:0 0 8px 0;font-size:24px}
    header p{margin:0;color:var(--muted)}
    header .brand{display:flex;align-items:center;gap:12px}
    header .brand .logo{height:56px;width:auto;display:block}
    main{max-width:1400px;margin:0 auto;padding:16px}
    .toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-bottom:12px}
    .toolbar input[type="text"]{flex:1 1 260px;padding:8px 10px;border:1px solid var(--border);border-radius:6px}
    .toolbar .hint{font-size:12px;color:var(--muted)}
    .toolbar select, .toolbar button, .toolbar label{padding:8px 10px;border:1px solid var(--border);border-radius:6px;background:#fafafa}
    table{width:100%;border-collapse:collapse;table-layout:fixed}
    th,td{padding:8px 10px;border-bottom:1px solid var(--border);vertical-align:top;overflow-wrap:anywhere}
    th{background:#fafafa;text-align:left;position:sticky;top:0;z-index:1}
    .pagination{display:flex;gap:6px;align-items:center;flex-wrap:wrap;margin-top:12px}
    .pagination button{padding:6px 10px;border:1px solid var(--border);border-radius:6px;background:#fff;cursor:pointer}
    .pagination button.active{background:var(--accent);color:#fff;border-color:var(--accent)}
    .stats{font-size:12px;color:var(--muted)}
    .error{color:var(--error);font-size:12px}
    .sr{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}
    .nowrap{white-space:nowrap}
    code.k{background:#f4f4f4;border:1px solid #e6e6e6;border-radius:4px;padding:0 4px;font-family:ui-monospace,Menlo,Consolas,monospace}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <img class="logo" src="assets/icon.png" alt="ArgendataFundar" href="#">
    </div>
  </header>
  <main>
    <main>
      <h1>Biblioteca de Datasets de Argendata</h1>
      <h2>Explorador de datasets de <a href="https://argendata.fund.ar/" target="_blank" rel="noopener">argendata.fund.ar</a>.</h2>
      <p>Buscador con soporte de expresiones regulares y tabla paginada.</p>
      <p>Filtrá por tópico, buscá por regex y paginá los resultados.</p>
      <p>Los datasets se encuentran en el repositorio de <a href="https://github.com/argendatafundar/data" target="_blank">argendatafundar/data</a>.</p>
      <p>Haciendo click podés ver el dataset y el gráfico correspondiente</p>

      <section class="toolbar" aria-label="Controles de búsqueda y paginación">
        <select id="categoryFilter" aria-label="Filtrar por categoría">
          <option value="">Todas las categorías</option>
        </select>
        <select id="topicFilter" aria-label="Filtrar por tópico">
          <option value="">Todos los tópicos</option>
        </select>
        <input id="q" type="text" placeholder="Buscar" aria-label="Buscar (regex)">
        <button id="searchBtn" type="button">Buscar</button>
        <span id="err" class="error" role="status" aria-live="polite"></span>
        <span class="stats" id="stats"></span>
      </section>

    <div style="overflow:auto; max-height:70vh; border:1px solid var(--border); border-radius:8px;">
      <table id="table" aria-label="Resultados">
        <colgroup>
          <col style="width:10%">
          <col style="width:9%">
          <col style="width:12%">
          <col style="width:12%">
          <col style="width:12%">
          <col style="width:16%">
          <col style="width:12%">
          <col style="width:14%">
        </colgroup>
        <thead id="thead"></thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>

    <nav class="pagination" id="pager" aria-label="Paginación"></nav>
    <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-top:8px;">
      <label for="pageSize" style="font-size:14px;">Filas por página:</label>
      <select id="pageSize" aria-label="Filas por página" style="padding:8px 10px; border:1px solid var(--border); border-radius:6px; background:#fafafa">
        <option value="10">10</option>
        <option value="20" selected>20</option>
        <option value="25">25</option>
        <option value="50">50</option>
        <option value="100">100</option>
      </select>
    </div>
    <p class="hint">
      Sugerencia: usa patrones regex. Teclas rápidas: <code class="k">/</code> enfoca buscador, <code class="k">Enter</code> aplica.
    </p>
  </main>
  <script src="table.js"></script>
</body>
</html>